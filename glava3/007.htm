<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Language" content="uk">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>3.3.1. Метод доступу CSMA/CD</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:Categories msdt:dt="string">Навчальний метеріал</mso:Categories>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body>

<h3>3.3.1. Метод доступу CSMA/CD </h3>
<p>У мережах Ethernet використовується метод доступ; до середовища передачі 
даних, який називається методом колективного доступу з визначенням несучої і 
виявленням колізій (carrier-sense-multiply-access with collision detection, CSMA/CD).</p>
<p>Цей метод застосовується винятково в мережах з логічною загальною шиною (до 
яких відносяться і радіомережі, що породили цей метод). Усі комп'ютери такої 
мережі мають безпосередній доступ до загальної шини, тому вона може бути 
використана для передачі даних між будь-якими двома вузлами мережі. Одночасно 
всі комп'ютери мережі мають можливість негайно (з урахуванням затримки поширення 
сигналу по фізичному середовищу) одержати дані, що кожної з комп'ютерів почав 
передавати на загальну шину (мал. 3.3). Простота схеми підключення — це один з 
факторів, що визначили успіх стандарту Ethernet. Говорять, що кабель, до якого 
підключені всі станції, працює в <i>режимі колективного&nbsp; доступу</i> (Multiply 
Access, MA).</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="100%" align="center">
    <img border="0" src="images/m3_3.gif" width="461" height="279"></td>
  </tr>
  <tr>
    <td width="100%" align="center">Мал. 3.3. Метод випадкового доступу CSMA/CD</td>
  </tr>
</table>
<h4>Етапи доступу до середовища</h4>
<p>Всі дані, які передаються по мережі, розміщуються в кадри визначеної 
структури і забезпечуються унікальною адресою станції призначення.</p>
<p>Щоб одержати можливість передавати кадр, станція повинна переконатися, що 
поділене середовище вільне. Це досягається прослуховуванням основної гармоніки 
сигналу, яка також називається несучою частотою (carrier-sense, CS). Ознакою 
незайнятості середовища є відсутність на ній несучої частоти, що при 
манчестерському способі кодування дорівнює 5-10 Мгц, в залежності від 
послідовності одиниць і нулів, що передаються у даний момент.</p>
<p>Якщо середовище вільне, то вузол має право почати передачу кадру. Цей кадр 
зображений на мал.&nbsp;3.3 першим. <i>Вузол&nbsp;1</i> знайшов, що середовище вільне, і 
почав передавати свій кадр. У класичній мережі Ethernet на коаксіальному кабелі 
сигнали передавача <i>вузла 1</i> поширюються в обидва боки, так що усі вузли 
мережі їх одержують. Кадр даних завжди супроводжується <i>преамбулою</i> (<i>preamble</i>), 
яка складається з 7 байт, ш має значення 10101010, і 8-ий байт, дорівнює 
10101011. Преамбула потрібна для входження приймача в побітовий і побайтовий 
синхронізм з передавачем.</p>
<p>Всі станції, підключені до кабелю, можуть розпізнати факт передачі кадру, і 
та станція, що пізнає власну адресу в заголовках кадру, записує його вміст у 
свій внутрішній буфер, обробляє отримані дані, передає їх нагору по своєму 
стеку, а потім посилає по кабелю кадр-відповідь. Адреса станції джерела 
міститься у вихідному кадрі, тому станція-одержувач знає, кому потрібно послати 
відповідь.</p>
<p><i>Вузол 2</i> під час передачі кадру <i>вузлом 1</i> також намагався почати 
передачу свого кадру, однак знайшов, що середовище зайняте — в ньому присутня 
несуча частота, — тому <i>вузол 2</i> змушений чекати, поки <i>вузол 1</i> не 
припинить передачу кадру.</p>
<p>Після закінчення передачі кадру усі вузли мережі зобов'язані витримати <i>
технологічну паузу</i> (<i>Inter Packet Gap</i>) у 9,6&nbsp;мкс. Ця пауза, 
називається також міжкадровим інтервалом, потрібна для приведення мережних 
адаптерів у вихідний стан, а також для запобігання монопольного захоплення 
середовища однією станцією. Після закінчення технологічної паузи вузли мають 
право почати передачу свого кадру, тому що середовище вільне. Через затримки 
поширення сигналу по кабелю не всі вузли строго одночасно фіксують факт 
закінчення передачі кадру <i>вузлом 1</i>.</p>
<p>У наведеному прикладі <i>вузол 2</i> дочекався закінчення передачі кадру <i>
вузлом 1</i>, зробив паузу в 9,6&nbsp;мкс і почав передачу свого кадру.</p>
<h4>Виникнення колізії</h4>
<p>При описаному підході можлива ситуація, коли дві станції одночасно 
намагаються передати кадр даних по загальному середовищу. Механізм 
прослуховування середовища і пауза між кадрами не гарантують від виникнення 
такої ситуації, коли дві чи більше станцій одночасно вирішують, що середовище 
вільне, і починають передавати свої кадри. Говорять, що при цьому відбувається
<b><i>колізія</i></b> (<b><i>collision</i></b>), тому що вміст обох кадрів 
зіштовхується на загальному кабелі і відбувається перекручування інформації — 
методи кодування, використовувані в Ethernet, не дозволяють виділяти сигнали 
кожної станції з загального сигналу.</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">
  <tr>
    <td width="100%" bgcolor="#2D4C54"><font color="#FFFFFF"><b>Примітка</b></font></td>
  </tr>
  <tr>
    <td width="100%" bgcolor="#D1F0F8">Зауважимо, що цей факт відображається у 
    складовій “Base(band)”, яка&nbsp; присутня у назвах всіх фізичних протоколів 
    технології Ethernet (наприклад, 10Base-2,10Bose-T і т.п.). Baseband network 
    означає мережа з не модульованою передачею, у якій повідомлення 
    пересилаються в цифровій формі по єдиному каналу, без частотного поділу.</td>
  </tr>
</table>
<p><b><i>Колізія</i></b> — це нормальна ситуація в роботі мереж Ethernet. У 
прикладі, зображеному на мал.&nbsp;3.4, колізію породила одночасна передача даних 
вузлами 3 і 1. </p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber3">
  <tr>
    <td width="100%" align="center">
    <img border="0" src="images/m3_4.gif" width="432" height="489"></td>
  </tr>
  <tr>
    <td width="100%" align="center">Мал.3.4 Схема виникнення колізії</td>
  </tr>
</table>
<p>Щоб коректно обробити колізію, усі станції одночасно спостерігають за 
виникаючими на кабелі сигналами. Якщо передані і сигнали, що спостерігаються, 
відрізняються, то фіксується <i>виявлення колізії</i> (<i>collision detection, 
CD</i>). Для збільшення імовірності якнайшвидшого виявлення колізії всіма 
станціями мережі станція, що знайшла колізію, перериває передачу свого кадру (у 
довільному місці, можливо, і не на границі байта) і підсилює ситуацію колізії 
посилкою в мережу спеціальної послідовності з 32&nbsp;біт, яка називається <i>
jam-послідовністю</i>.</p>
<p>Після цього станція передавач , що знайшла колізію, зобов'язана припинити 
передачу і зробити паузу протягом короткого випадкового інтервалу часу. Потім 
вона може знову почати спробу захоплення середовища і передачі кадру. Випадкова 
пауза вибирається по наступному алгоритму:<br>
<br>
Пауза = L х (інтервал відстрочки),<br>
<br>
де інтервал відстрочки дорівнює 512&nbsp;бітовим інтервалам (у технології Ethernet 
прийнятно всі інтервали вимірювати в бітових інтервалах; бітовий інтервал 
позначається як bt і відповідає часу між появою двох послідовних біт даних на 
кабелі; для швидкості 10&nbsp;Мбіт/с величина бітового інтервалу дорівнює 0,1&nbsp;мкс чи 
100&nbsp;нс);<br>
L являє собою ціле число, обране з рівною імовірністю з діапазону [0, 2<sup>N</sup>, 
де N — номер повторної спроби передачі даного кадру: 1,2,..., 10.</p>
<p>Після 10-й спроби інтервал, з якого вибирається пауза, не збільшується. Таким 
чином, випадкова пауза може приймати значення від 0 до 52,4&nbsp;мс.</p>
<p>Якщо 16 послідовних спроб передачі кадру викликають колізію, то передавач 
повинний припинити спроби і відкинути цей кадр.</p>
<p>З опису методу доступу видно, що він носить випадковий характер, і 
імовірність успішного одержання у своє розпорядження загальне середовище 
залежить від завантаженості мережі, тобто від інтенсивності виникнення в 
станціях потреби в передачі кадрів. При розробці цього методу наприкінці 70-х 
років передбачалося, що швидкість передачі даних 10&nbsp;Мбіт/с дуже висока в 
порівнянні з потребами комп'ютерів у взаємному обміні даними, тому завантаження 
мережі буде завжди невеликим. Це припущення залишається іноді справедливим і 
донині, однак уже з'явилися додатки, що працюють у реальному масштабі часу з 
мультимедійною інформацією, що дуже завантажують сегменти Ethernet. При цьому 
колізії виникають набагато частіше. При значній інтенсивності колізій корисна 
пропускна здатність мережі Ethernet різко падає, тому що мережа майже постійно 
зайнята повторними спробами передачі кадрів. Для зменшення інтенсивності 
виникнення колізій потрібно або зменшити трафік, скоротивши, наприклад, 
кількість вузлів у сегменті чи замінити додатки, або підвищити швидкість 
протоколу, наприклад перейти, на Fast&nbsp;Ethernet.</p>
<p>Слід зазначити, що метод доступу CSMA/CD взагалі не гарантує станції, що вона 
коли-небудь, зможе одержати доступ до середовища. Звичайно, при невеликому 
завантаженні мережі імовірність такої події невелика, але при коефіцієнті 
використання мережі, що наближається до 1, така подія стає дуже ймовірною. Цей 
недолік методу випадкового доступу — плата за його надзвичайну простоту, що 
зробила технологію Ethernet самою недорогою. Інші методи доступу — маркерний 
доступ мереж Token&nbsp;Ring і FDDI, метод Demand&nbsp;Priority мереж 100VG-AnyLAN — 
вільні від цього недоліку.</p>
<h4>Час подвійного обороту і розпізнавання колізій</h4>
<p>Чітке розпізнавання колізій всіма станціями мережі є необхідною умовою 
коректної роботи мережі Ethernet. Якщо яка-небудь передавальна станція не 
розпізнає колізію і вирішить, що кадр даних нею переданий вірно, то цей кадр 
даних буде загублений. Через накладення сигналів при колізії інформація кадру 
спотвориться, і він буде відбракований приймаючою станцією (можливо, через 
розбіжність контрольної суми). Швидше за все, перекручена інформація буде 
повторно передана яким-небудь протоколом верхнього рівня, наприклад транспортним 
чи прикладним, працюючим із установленням з'єднання. Але повторна передача 
повідомлення протоколами верхніх рівнів відбудеться через значно більш тривалий 
інтервал часу (іноді навіть через кілька секунд) у порівнянні з мікросекундними 
інтервалами, якими оперує протокол Ethernet. Тому якщо колізії не будуть надійно 
розпізнаватися вузлами мережі Ethernet, то це приведе до помітного зниження 
корисної пропускної здатності даної мережі.</p>
<p>Для надійного розпізнавання колізій повинно виконуватися наступне 
співвідношення:<br>
<br>
Т<sub>min</sub>=&gt;PDV<br>
<br>
де T<sub>min</sub> — час передачі кадру мінімальної довжини, а PDV — час, за 
який сигнал колізії встигає поширитися до самого далекого вузла мережі. Тому що 
в гіршому випадку сигнал повинний пройти двічі між найбільш вилучений друг від 
друга станціями мережі (в одну сторону проходить неспотворений сигнал, а на 
зворотному шляху поширюється вже перекручений колізією сигнал), цей час 
називається <i>часом подвійного обороту</i> (<i>Path Delay Value, PDV</i>).</p>
<p>При виконанні цієї умови станція передавач повинна встигнути знайти колізію, 
яку викликав переданий станцією кадр, ще до того, як вона закінчить передачу 
цього кадру.</p>
<p>Очевидно, що виконання цієї умови залежить, з одного боку, від довжини 
мінімального кадру і пропускної здатності мережі, а з іншого боку, від довжини 
кабельної системи мережі і швидкості поширення сигналу в кабелі (для різних 
типів кабелю ця швидкість трохи відрізняється).</p>
<p>Усі параметри протоколу Ethernet підібрані таким чином, щоб при нормальній 
роботі вузлів мережі колізії завжди чітко розпізнавалися. При виборі параметрів, 
звичайно, враховувалося і приведене вище співвідношення, що зв'язує між собою 
мінімальну довжину кадру і максимальну відстань між станціями в сегменті мережі.</p>
<p>В стандарті Ethernet прийнято, що мінімальна довжина поля даних кадру складає 
46&nbsp;байт (що разом зі службовими полями дає мінімальну довжину кадру 64 байт, a 
разом із преамбулою - 72&nbsp;байт чи 576&nbsp;біт). Звідси може бути визначене обмеження 
на відстань між станціями.</p>
<p>Отже, у 10-мегабітному Ethernet час передачі кадру мінімальної довжини 
дорівнює 575 бітових інтервалів, отже, час подвійного обороту повинний бути 
менше 575&nbsp;мкс. Відстань, що сигнал може пройти за цей час, залежить від типу 
кабелю і для товстого коаксіального кабелю дорівнює приблизно 13&nbsp;280м. З огляду 
на, те що за цей час сигнал повинний пройти по лінії зв'язку двічі, відстань між 
двома вузлами не повинне бути більше 6&nbsp;635м. У стандарті величина цієї відстані 
обрана істотно менше, з обліком інших, більш строгих обмежень.</p>
<p>Одне з таких обмежень зв'язано з гранично припустимим загасанням сигналу. Для 
забезпечення необхідної потужності сигналу при його проходженні між найбільш 
віддаленими друг від друга станціями сегмента кабелю максимальна довжина 
безупинного сегмента товстого коаксіального кабелю з обліком внесеного їм 
загасання обрана в 500&nbsp;м. Очевидно, що на кабелі в 500&nbsp;м умови розпізнавання 
колізій будуть виконуватися з великим запасом для кадрів будь-якої стандартної 
довжини, у тому числі і 72&nbsp;байт (час подвійного обороту по кабелю 500&nbsp;м складає 
всього 43,3&nbsp;бітових інтервали). Тому мінімальна довжина кадру могла б бути 
встановлена ще менше. Однак розробник технології не стали зменшувати мінімальну 
довжину кадру, маючи на увазі багато сегментні мережі, що будуються з декількох 
сегментів, з'єднаних повторювачами.</p>
<p>Повторювачі збільшують потужність переданих із сегмента на сегмент сигналів в 
результаті загасання сигналів зменшується і можна використовувати мережу 
набагато більшої довжини складаючи її з декількох сегментів. У коаксіальних 
реалізаціях Ethernet розробники обмежили максимальну кількість сегментів у 
мережі п'ятьма, що у свою чергу обмежує загальну довжину мережі 2500 метрами. 
Навіть у такий багатосегментній мережі умова виявлення колізій як і раніше 
виконується з великим запасом (порівняємо отримане з умови припустимого 
загасання відстані в 2500 обчисленим вище максимально можливим за часом 
поширення сигналу відстанню 6635&nbsp;м). Однак у дійсності часовий запас є істотно 
менше, оскільки в багатосегментних мережах самі повторювачі вносять у поширення 
сигналу додаткову затримку в кілька десятків бітових інтервалів. Природно, 
невеликий запас був зроблений також для компенсації відхилень параметрів кабелю 
і повторювачів.</p>
<p>У результаті вираховування всіх цих і деяких інших факторів було ретельно 
підібране співвідношення між мінімальною довжиною кадру і максимально можливою 
відстанню між станціями мережі, що забезпечує надійне розпізнавання колізій. Цю 
відстань називають також максимальним діаметром мережі.</p>
<p>Зі збільшень швидкості передачі кадрів, що має місце в нових стандартах, що 
базуються на тому ж методі доступу CSMA/CD, наприклад Fast&nbsp;Ethernet, максимальна 
відстань між станціями мережі зменшується пропорційно збільшенню швидкості 
передачі. У стандарті Fast&nbsp;Ethernet вона складає близько 210м, а в стандарті 
Gigabit&nbsp;Ethernet вона була б обмежене 25&nbsp;метрами, якби розробники стандарту не 
почали деяких заходів для збільшенню мінімального розміру пакета. У табл. 3.1 
приведені значення основних параметрів процедури передачі кадру стандарту 802.3, 
що не залежать від реалізації фізичного середовища. Важливо відзначити, що кожен 
варіант фізичного середовища технології Ethernet додає до цих обмежень свої, 
часто більш строгі обмеження, що також повинні виконуватися і які будуть 
розглянуті нижче.</p>
<p>&nbsp;</p>
<table BORDER="0" CELLSPACING="1" CELLPADDING="2" WIDTH="100%">
  <caption style="text-align: left"><a name="t1">Таблиця 3.1. Параметри рівня 
  MAC Ethernet</a></caption>
  <tr>
    <td colspan="2"><hr color="#2D4C54" size="3"></td>
  </tr>
  <tr>
    <th align="left">Параметри</th>
    <th align="left">Значення</th>
  </tr>
  <tr>
    <td colspan="2"><hr color="#2D4C54" size="3"></td>
  </tr>
  <tr>
    <td>Бітова швидкість</td>
    <td>10 Мбіт/с</td>
  </tr>
  <tr>
    <td>Інтервал відстрочки</td>
    <td>512 бітових інтервалу</td>
  </tr>
  <tr>
    <td>Міжкадровий інтервал (IPG)</td>
    <td>9,6 мкс</td>
  </tr>
  <tr>
    <td>Максимальне число спроб передачі</td>
    <td>16</td>
  </tr>
  <tr>
    <td>Максимальне число зростання діапазону паузи</td>
    <td>10</td>
  </tr>
  <tr>
    <td>Довжина jam-послідовності</td>
    <td>32 біта</td>
  </tr>
  <tr>
    <td>Максимальна довжина кадру (без преамбули)</td>
    <td>1518 байт</td>
  </tr>
  <tr>
    <td>Мінімальна довжина кадру (без преамбули)</td>
    <td>64 байт (512 біт)</td>
  </tr>
  <tr>
    <td>Довжина преамбули</td>
    <td>64 біт</td>
  </tr>
  <tr>
    <td>Мінімальна довжина випадкової паузи після колізії</td>
    <td>0 бітових інтервалів</td>
  </tr>
  <tr>
    <td>Максимальна довжина випадкової паузи після колізії</td>
    <td>524 000 бітових інтервалу</td>
  </tr>
  <tr>
    <td>Максимальна відстань між станціями мережі</td>
    <td>2500м</td>
  </tr>
  <tr>
    <td>Максимальне число станцій у мережі</td>
    <td>1024</td>
  </tr>
  <tr>
    <td colspan="2"><hr color="#2D4C54" size="1"></td>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber4">
  <tr>
    <td width="100%" align="left" colspan="3"><hr color="#2D4C54" size="4"></td>
  </tr>
  <tr>
    <td width="33%" align="left"><a href="006.htm">Попередня</a></td>
    <td width="33%" align="center"><a href="001.htm">Перша</a></td>
    <td width="34%" align="right"><a href="008.htm">Наступна</a></td>
  </tr>
</table>

</body>

</html>
