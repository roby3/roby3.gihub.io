<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="uk">
<link rel=Edit-Time-Data href=11.files/editdata.mso>
<title>4.3.1. Причини логічної структуризації локальних мереж</title>
</head>
<body lang=Ua>
<h3>4.3.1. Причини логічної структуризації локальних мереж</h3>
<h4><a name=23></a>Обмеження мережі, побудованої на загальному
поділюваному середовищі</h4>
<p>При побудові невеликих мереж, що складаються
з 10-30 вузлів, використання стандартних технологій на поділюваних середовищах передачі даних приводить до економічних
й ефективних рішень. У всякому разі, це твердження справедливо для дуже великої кількості
сьогоднішніх мереж, навіть тих, у яких передаються великими обсяги
мультимедійної
інформації, - поява високошвидкісних
технологій зі швидкостями обміну 100 й 1000 Мбіт/с вирішує проблему
якості транспортного обслуговування таких мереж.</p>
<p>Ефективність поділюваного середовища для невеликої мережі
проявляється в першу чергу в наступних
властивостях:</p>
<ul type=disc>
	<li>простої топології мережі, що допускає легке нарощування числа вузлів (у невеликих межах);</li>
	<li>відсутності втрат кадрів через переповнення буферів комунікаційних пристроїв, тому що новий кадр не передається в мережу, поки не прийнятий попередній - сама логіка поділу середовища регулює потік кадрів і припиняє станції, що занадто часто генерують кадри, змушуючи їх чекати доступу;</li>
	<li>простоті протоколів, що забезпечила низьку вартість мережних адаптерів, повторювачів і концентраторів.</li>
</ul>
<p>Однак справедливим
є й інше твердження
- великі мережі, що нараховують сотні й тисячі
вузлів, не можуть бути побудовані на основі одного поділюваного середовища навіть такої швидкісної технології, як
<b>Gigabit</b><b> Ethernet</b>. І
не тільки тому, що практично всі технології обмежують кількість вузлів у поділюваному середовищі;
всі види сімейства <b>Ethernet</b><b> - 1024</b> вузлами, <b>Token</b><b> Ring - 260</b> вузлами, a
<b>FDDI - 500</b> вузлами. Навіть мережа середніх розмірів, що складається з 50-100 комп'ютерів й вкладається в дозволений
максимум кількості вузлів, найчастіше буде погано працювати на одному поділюваному середовищі.</p>
<p>Основні недоліки
мережі на одному поділюваному
середовищі починають проявлятися
при перевищенні деякого порога кількості вузлів, підключених
до поділюваного середовища, і полягають у
наступному. Навіть та частка пропускної здатності поділюваного сегмента, що повинна в середньому діставатися одному вузлу (тобто, наприклад, 10/<b>N</b> Мбіт/с
для сегмента Ethernet з <b>N</b> комп'ютерами), дуже часто вузлу не дістається. Причина полягає у випадковому характері методу доступу до середовища, використовуваному
у всіх технологіях локальних мереж. Найбільш
важкі умови для вузлів мережі створює метод
доступу <b>CSMA/CD</b> технології <b>Ethernet</b>, але й
в інших технологіях, таких як <b>Token</b><b> Ring</b> або <b>FDDI</b>, де метод доступу носить менш випадковий характер і навіть часто називається детермінованим, випадковий фактор доступу до середовища однаково є присутнім і робить свій негативний вплив на пропускну здатність, що дістається окремому вузлу.</p>
<p>На мал. 4.14 показана залежність
затримок доступу до середовища передачі даних
у мережах <b>Ethernet</b>, <b>Token</b><b> Ring</b> і <b>FDDI</b> від коефіцієнта використання мережі
<b>р</b>, що
також часто називають коефіцієнтом навантаження мережі.
Нагадаємо, що коефіцієнт використання мережі
дорівнює відношенню трафіка, що повинна передати мережа, до її максимальної пропускної здатності. Для мережі
<b>Ethernet</b>
максимальна пропускна здатність дорівнює 10 Мбіт/с, а трафік, що вона повинна
передати, дорівнює сумі інтенсивностей
трафіка, який генерується кожним вузлом мережі.
Коефіцієнт використання звичайно вимірюють у відносних одиницях або відсотках.</p>
<table border="0" width="100%" id="table1">
	<tr>
		<td align="center">
<img width=422 height=345
src=images/m14.jpg v:shapes=_x0000_i1025 alt="Мал. 4.14. Затримки доступу до середовища передачі даних для технологій Ethernet, Token Ring й FDDI"></td>
	</tr>
	<tr>
		<td align="center">Мал. 4.14. Затримки доступу до середовища передачі даних для технологій Ethernet, Token Ring й FDDI</td>
	</tr>
</table>
<p>Як видно з малюнка, всім
технологіям властиво експонентнціальне
зростання величини затримок доступу при
збільшенні коефіцієнта використання мережі,
відрізняється тільки поріг, при якому наступає
різкий перелом в поведінці мережі, коли майже прямолінійна залежність
переходить у круту експоненту. Для всього
сімейства технологій Ethernet це 40-50 %, для
технології Token Ring - 60
%, а технології FDDI- 70%.</p>
<p>Кількість вузлів, при яких
коефіцієнт використання мережі починає
наближатися до небезпечного кордону, залежить
від типу функціонуючих у вузлах додатків. Якщо
раніше для мереж
Ethernet вважалося,
що 30 вузлів - це цілком прийнятне число для одного поділюваного сегмента, то
сьогодні для мультимедійних
додатків, що перекачують великі
файли даних, цю
цифру потрібно уточнювати за допомогою натурних або імітаційних експериментів.</p>
<p>Вплив затримок і колізій на
корисну пропускну здатність мережі Ethernet добре відбиває графік, представлений
на мал. 4.15.</p>
<table border="0" width="100%" id="table2">
	<tr>
		<td align="center">
<img width=374 height=323
src=images/m15.jpg v:shapes=_x0000_i1026 alt="Мал. 4.15. Залежність корисної пропускної здатності мережі Ethernet від коефіцієнта використання"></td>
	</tr>
	<tr>
		<td align="center">Мал. 4.15. Залежність корисної пропускної здатності мережі Ethernet від коефіцієнта використання</td>
	</tr>
</table>
<p>При завантаженні мережі до 50 % технологія Ethernet
на поділюваному сегменті добре справляється з
передачею трафіка, який
генерується кінцевими вузлами. Однак при
підвищенні інтенсивності генерованого вузлами трафіка мережа усе більше часу починає проводитись неефективно, повторно передаючи кадри,
які викликали колізію. При зростанні
інтенсивності трафіка, що генерується, до такої величини,
коли коефіцієнт використання мережі наближається
до 1, імовірність зіткнення кадрів настільки
збільшується, що практично будь-який кадр, що яка-небудь станція намагається
передати, зіштовхується з іншими кадрами, викликаючи колізію. Мережа перестає передавати корисну інформацію, а
працює &quot;на себе&quot;, обробляючи колізії.</p>
<p>Цей ефект добре відомий на
практиці й досліджений шляхом імітаційного моделювання, тому сегменти Ethernet не рекомендується завантажувати так, щоб середнє
значення коефіцієнта використання перевершувало 30%. Саме в багатьох системах керування
мережами граничний кордон
для індикатора коефіцієнта завантаження мережі Ethernet за
замовчуванням встановлюється на величину 30%.</p>
<p>Технологія Ethernet
найбільш чутлива до перевантажень поділюваного
сегмента, але й інші технології також досить
страждають від цього ефекту, тому обмеження, пов'язані з виникаючими колізіями
й більшим часом очікування
доступу при значному завантаженні поділюваного
сегмента, найчастіше виявляються більше серйозними, чим
обмеження на максимальну кількість вузлів, певна
в стандарті з міркувань стійкої передачі електричних сигналів у кабелях.</p>
<p>В результаті навіть мережу середніх розмірів важко побудувати на одному
поділюваному сегменті так, щоб вона працювала ефективно при зміні інтенсивності
трафіка, що генерується станціями. Крім того, при
використанні поділюваного середовища
проектувальник мережі зіштовхується
із твердими обмеженнями максимальної довжини мережі, які для всіх технологій лежать у межах декількох кілометрів, і тільки технологія 
<b>FDDI</b> дозволяє будувати
локальні мережі, довжина яких виміряється
десятками кілометрів.</p>
<h4><a name=24></a>Переваги логічної структуризації мережі</h4>
<p>Обмеження, що виникають через
використання загального поділюваного середовища, можна перебороти, розділивши мережу на кілька поділюваних середовищ і з'єднавши окремі сегменти мережі
такими пристроями, як мости, комутатори або
маршрутизатори (мал. 4.16).</p>
<table border="0" width="100%" id="table3">
	<tr>
		<td align="center">
<img width=470 height=547
src=images/m16.jpg v:shapes=_x0000_i1027 alt="Мал. 4.16. Логічна структуризація мережі"></td>
	</tr>
	<tr>
		<td align="center">Мал. 4.16. Логічна структуризація мережі</td>
	</tr>
</table>
<p>Перераховані пристрої передають кадри з
одного свого порту на інший, аналізуючи адресу
призначення, що поміщена в цих кадрах. (На відміну від концентраторів, які
повторюють кадри на всіх своїх портах, передаючи їх
в усі приєднані до них сегменти, незалежно від того, у якому
з них перебуває станція призначення.) Мости й
комутатори виконують операцію передачі кадрів на основі плоских адрес канального рівня, тобто Мас-адрес,
а маршрутизатори - на основі номера мережі.
При цьому єдине поділюване середовище,
створене концентраторами (або в граничному випадку - одним сегментом кабелю), поділяється
на декілька частин, кожна з яких приєднана до порту моста,
комутатора або маршрутизатора.</p>
<p>Говорять, що при цьому мережа
ділиться на логічні сегменти або мережа
піддається <i>логічній структуризації. </i>Логічний сегмент являє собою єдине
поділюване середовище. Розподіл мережі на логічні
сегменти приводить до того, що навантаження,
що доводиться на кожний
зі знову утворених сегментів, майже завжди виявляються менше, ніж навантаження, що випробовувала вихідна мережа.
Отже, зменшуються шкідливі ефекти від поділу середовища: знижується час очікування
доступу, а в мережах Ethernet
- і інтенсивність колізій.</p>
<p>Для ілюстрації цього ефекту розглянемо мал. 4.17. На ньому
зображені два сегменти, що з'єднані мостом.
Усередині сегментів є повторювачі. До розподілу
мережі на сегменти весь
трафік, генерований вузлами мережі,
був загальним (представимо, що місце міжмережевого пристрою також займав
повторювач) і враховувався при визначенні коефіцієнта використання мережі. Якщо позначити середню інтенсивність трафіка, що йде від вузла 
<b>I</b> до вузла J через <b>С<sub>ij</sub></b>, то сумарний трафік,
що повинна була передавати мережа до розподілу на сегменти, дорівнює <b>C<sub>сумма</sub></b><b><sup>=</sup> 2С<sub>ij</sub></b>
(вважаємо, що сумування здійснюється по всіх вузлах).</p>
<p>Після поділу
мережі на сегменти навантаження кожного
сегмента змінилося. При його обчисленні тепер потрібно враховувати тільки внутрісегментний трафік, тобто трафік кадрів, який циркулює
між вузлами одного сегмента, а також міжсегментний трафік,
що або направляється від вузла даного сегмента
вузлу іншого сегмента, або приходить від вузла
іншого сегмента у вузол даного сегмента. Внутрішній
трафік іншого сегмента
тепер навантаження на даний сегмент не створює.</p>
<p>Тому навантаження, наприклад,
сегмента <b>S</b><b>1</b>
стало дорівнювати Cs1 + C<sub>s</sub><sub>1</sub><sub>-s</sub><sub>2</sub>. де C<sub>s</sub><sub>1</sub> — внутрішній трафік 
<b>сегмента S</b><b>1</b>, a <b>Csi-s2</b>
— міжсегментний трафік. Щоб показати, що
навантаження сегмента S1 зменшилося, позначимо,
що загальне навантаження мережі до поділу на
сегменти можна записати в такій формі: <b>Ссуммарное</b><b> = C<sub>s1</sub><sup>+</sup> C<sub>s1-s2</sub>
+ C<sub>s2</sub></b>, а виходить, навантаження сегмента S1 після поділу стали дорівнювати
Ссуммарное= Cs2, тобто
зменшилось на величину внутрішнього трафіка
сегмента S2. А раз навантаження на сегмент
зменшилось, то відповідно до графіків, наведеними на мал. 4.14 й 4.15, затримки в сегментах
також зменшилися, а корисна пропускна здатність
сегмента в цілому й корисній пропускній здатності,
що доводиться на один
вузол, збільшилися.</p>
<table border="0" width="100%" id="table4">
	<tr>
		<td align="center">
<img width=532 height=389
src=images/m17.jpg v:shapes=_x0000_i1028 alt="Мал. 4.17. Зміна навантаження при розподілі мережі на сегменти"></td>
	</tr>
	<tr>
		<td align="center">Мал. 4.17. Зміна навантаження при розподілі мережі на
сегменти</td>
	</tr>
</table>
<p>Вище було сказано, що розподіл мережі на
логічні сегменти <i>майже </i>завжди зменшує навантаження в нових сегментах.
Слово &quot;майже&quot; враховує дуже рідкий випадок, коли мережа розбита на сегменти так, що внутрішній трафік кожного сегмента дорівнює нулю, тобто весь трафік є міжсегментним.
Для приклада з мал. 4.17 це означало б, що всі
комп'ютери <b>сегмента S1</b> обмінюються
даними тільки з комп'ютерами <b>сегмента S2</b>, і навпаки.</p>
<p>Такий випадок є, природно, екзотичним. На практиці на підприємстві
завжди можна виділити групу комп'ютерів, які належать співробітникам, що
виконують загальні завдання.
Це можуть бути співробітники однієї робочої
групи, відділу, іншого структурного підрозділу підприємства. У більшості
випадків їм потрібен доступ до ресурсів мережі їхнього відділу й тільки іноді - доступ до додаткових ресурсів. І хоча вже згадане емпіричне
правило, що говорить про те, що можна
розділити мережу на сегменти так, що 80 % трафіка становить звертання до локальних ресурсів і тільки
20 % - до віддалених, сьогодні трансформується
в правило 50 на 50 % і навіть 20 на 80 %, однаково внутрісегментний
трафик існує. Якщо його
немає, то тоді виходить, що мережа розбита на
логічні підмережі
невірно.</p>
<p>Більшість великих мереж розробляється на основі структури із загальною магістраллю, до якої через мости й
маршрутизатори приєднуються підмережі.
Ці підмережі
обслуговують різні відділи. Підмережі
можуть поділятися й далі на сегменти, призначені
для обслуговування робочих груп.</p>
<p>У загальному
випадку розподіл мережі
на логічні сегменти підвищує продуктивність мережі
(за рахунок розвантаження сегментів), а також гнучкість побудови мережі, збільшуючи ступінь захисту даних, і полегшує
керування мережею.</p>
<p><i>Сегментація збільшує гнучкість
мережі. </i>При побудові мережі
як сукупності підмереж
кожна підмережа може
бути адаптована до специфічних потреб робочої групи або відділу. Наприклад, в
одній підмережі може використовуватись технологія Ethernet
й ОС NetWare, а в інший Token Ring й OS-400, відповідно до традицій того або іншого
відділу або потребами наявних додатків. Разом з
тим, у користувачів обох
підмереж існує
можливість обмінюватися даними через міжмережевий пристрій, такий
як міст, комутатор, маршрутизатор. Процес розбивки мережі
на логічні сегменти можна розглядати й у зворотному напрямку,
як процес створення великої мережі з модулів -
уже наявних підмереж.</p>
<p><i>Підмережі підвищують безпеку
даних. </i>При підключенні
користувачів до різних фізичних сегментів мережі
можна заборонити доступ певних користувачів до
ресурсів інших сегментів. Встановлюючи різні
логічні фільтри на мостах, комутаторах і маршрутизаторах, можна контролювати
доступ до ресурсів, чого не дозволяють зробити повторювачі.</p>
<p><i>Підмережі спрощують керування
мережею. </i>Побічним ефектом зменшення трафіка й підвищення безпеки даних є спрощення керування
мережею. Проблеми дуже часто локалізуються
усередині сегмента. Як й у випадку структурованої кабельної системи, проблеми однієї підмережі
не роблять впливу
на інші підмережі. Підмережі утворюють логічні домени керування мережею.</p>
<p>Мережі повинні проектуватися на двох рівнях: фізичному й логічному.
Логічне проектування визначає місця розташування ресурсів, додатків і способи групування цих ресурсів у логічні сегменти.</p>
<h4><a name=25></a>Структуризація за допомогою мостів і
комутаторів</h4>
<p>У даній главі розглядаються пристрої логічної структуризації мереж, що працюють на канальному рівні стека
протоколів, а саме - мости й комутатори. Структуризація мережі можлива також на основі маршрутизаторів, які для виконання
цього завдання залучають
протоколи мережного рівня. Кожен спосіб структуризації - за допомогою
канального протоколу й за допомогою мережного
протоколу - має свої переваги й недоліки. У
сучасних мережах часто використають комбінований спосіб логічної структуризації -
невеликі сегменти поєднуються пристроями канального рівня в більші підмережі, які, у свою
чергу, з'єднуються маршрутизаторами.</p>
<p>Отже, мережу
можна поділити на логічні сегменти за допомогою пристроїв
двох типів - <b>мостів</b> (<b>bridge</b>) або <b>комутаторів</b> (<b>switch</b>, 
<b>switching</b><b> hub</b>). Відразу після появи комутаторів на
початку 90-х років склалася думка, що міст і
комутатор - це принципово різні пристрої. І
хоча поступово подання про комутатори
змінилося, цю думка
можна почути й сьогодні.</p>
<p>Проте міст і комутатор — це
функціональні близнюки. Обидва ці пристрої просувають кадри на підставі тих самих
алгоритмів. Мости й комутатори використають два типи алгоритмів: алгоритм <b><i>прозорого моста</i></b><i> (<b>transparent</b><b> bridge</b>), 
</i>описаного в стандарті IEEE&nbsp;802.1D, або алгоритм
<b><i>моста
з маршрутизацією від джерела</i></b><i> (<b>source</b><b> routing bridge</b>) 
</i>компанії IBM для мереж
Token Ring. Ці стандарти
були розроблені задовго до появи першого комутатора, тому в них використається термін &quot;міст&quot;. Коли ж
з'явилася перша промислова модель комутатора для технології Ethernet,
то вона виконувала той же алгоритм просування кадрів IEEE 802.ID, що був з десяток років відпрацьований мостами локальних і
глобальних мереж. Точно так само надходять і всі сучасні комутатори. Комутатори, які
просувають кадри протоколу Token Ring,
працюють по алгоритму <b><i>Source</i></b><b><i> Routing</i></b>, характерному для мостів IBM.</p>
<p>Основна
відмінність комутатора від моста полягає в тому, що міст обробляє кадри послідовно, а комутатор
- паралельно. Ця обставина пов'язана з тим, що мости з'явилися в ті часи, коли мережу поділяли на
невелику кількість сегментів, а міжсегментний
трафік був невеликим
(він підкорявся правилу 80 на 20 %). Мережа найчастіше поділґлась на два
сегменти, тому й термін був обраний відповідний - міст. Для обробки потоку
даних із середньою інтенсивністю 1&nbsp;Мбіт/с мосту
цілком вистачало продуктивності одного процесорного блоку.</p>
<p>При зміні ситуації наприкінці
80-х - початку 90-х років – (при появі швидкісних
протоколів, продуктивних персональних комп'ютерів, мультимедійної інформації) поділ мережі на велику кількість сегментів - класичними
мостами перестали використовувати тому що мости не справлятися з роботою. Обслуговування потоків кадрів між тепер
уже декількома портами за допомогою одного
процесорного блоку і вимагали значного
підвищення швидкодії процесора, а це досить дороге рішення.</p>
<p>Більше ефективним
виявилося рішення,
що й &quot;породило&quot; комутатори: для обслуговування потоку, що надходить на кожен
порт, у пристрій ставився окремий
спеціалізований процесор, що реалізовував алгоритм моста.
По суті, комутатор - це мультипроцесорний міст, здатний
паралельно просувати кадри відразу між всіма парами своїх портів. Але якщо при
додаванні процесорних блоків комп'ютер не переставав називати комп'ютером, а
додавався тільки прикметник &quot;мультипроцесорний&quot;,
то з мультипроцесорними мостами відбулася
метаморфоза - вони перетворилися в комутатори. Цьому сприяв спосіб зв'язку між окремими процесорами комутатора - вони
зв'язувалися комутаційною матрицею, схожою на
матриці мультипроцесорних комп'ютерів, що зв'язують процесори з блоками
пам'яті.</p>
<p>Поступово комутатори витиснули з
локальних мереж класичні однопроцесорні
мости. Основна причина цього - дуже висока продуктивність, з якої комутатори
передають кадри між сегментами мережі. Якщо
мости могли навіть сповільнювати роботу мережі,
коли їхня продуктивність виявлялася менше
інтенсивності міжсегментного
потоку кадрів, то комутатори завжди випускаються із процесорами портів, які
можуть передавати кадри з тією максимальною швидкістю, на яку розрахований
протокол. Додавання до цьому паралельної
передачі кадрів між портами зробило продуктивність комутаторів на кілька
порядків вищою, ніж мостів - комутатори можуть передавати до декількох мільйонів кадрів у секунду, у той час як
мости звичайно обробляли 3-5 тисяч кадрів у секунду. Це й визначило долю мостів
і комутаторів.</p>
<p>Процес витиснення мостів почав
протікати досить швидко з 1994 року, і
сьогодні локальні мости практично не виробляються.
За час свого існування вже без конкурентів-мостів комутатори увібрали в себе
багато додаткових функцій, які з'являлися в результаті природного розвитку мережевих технологій. До цих функцій відноситься, наприклад, підтримка віртуальних мереж (VLAN), пріоритезація трафіка, використання магістрального порту за
замовчуванням і т.п.</p>
<p>Сьогодні мости як і раніше
працюють у мережах, але тільки на досить
повільних глобальних зв'язках між двома вилученими локальними мережами.
Такі мости називаються <b>вилученими мостами</b> (<b>remote</b><b> bridge</b>), і алгоритм їхньої роботи нічим
не відрізняється від стандарту 802.1D або <b>Source</b><b> Routing</b>.</p>
<p>Прозорі мости вміють, крім
передачі кадрів у рамках однієї технології,
транслювати протоколи локальних мереж,
наприклад Ethernet в Token Ring, FDDI в Ethernet і т.п. Ця властивість прозорих мостів описана в стандарті IEEE 802.1H.</p>
<p>Надалі будемо називати пристрій, що просуває кадри по алгоритму моста й
працює в локальній мережі, сучасним терміном &quot;комутатор&quot;.
При описі ж самих алгоритмів 802.1D й <b>Source Routing</b> у наступному розділі
будемо за традицією називати пристрій мостом,
як власно він в цих стандартах і називається.</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="table1">
  <tr>
    <td width="100%" align="left" colspan="3"><hr color="#2D4C54" size="4"></td>
  </tr>
  <tr>
    <td width="33%" align="left"><a href="010.htm">Попередня</a></td>
    <td width="33%" align="center"><a href="001.htm">Перша</a></td>
    <td width="34%" align="right"><a href="012.htm">Наступна</a></td>
  </tr>
</table>
</body>

</body>
</html>
