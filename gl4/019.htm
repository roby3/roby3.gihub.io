<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="uk">
<title>4.4.2. Характеристики, що впливають на продуктивність комутаторів</title>
</head>
<body lang=ua>
<h3>4.4.2.
Характеристики, що впливають на продуктивність комутаторів</h3>
<p>Продуктивність комутатора - це властивість, яку
мережеві інтегратори й адміністратори чекають
від цього пристрою в перш чергу.</p>
<p>Основними показниками комутатора,
що характеризують його продуктивність, є:</p>
<ul type=disc>
	<li>швидкість фільтрації кадрів;</li>
	<li>швидкість просування кадрів;</li>
	<li>пропускна здатність;</li>
	<li>затримка передачі кадру.</li>
</ul>
<p>Крім того, існує кілька
характеристик комутатора, які найбільшою мірою впливають на зазначені характеристики продуктивності. До них відносяться:</p>
<ul type=disc>
	<li>тип комутації – &quot;на льоту&quot; або з повною буферизацією;</li>
	<li>розмір буфера (буферів) кадрів;</li>
	<li>продуктивність внутрішньої шини;</li>
	<li>продуктивність процесора або процесорів;</li>
	<li>розмір внутрішньої адресної таблиці.</li>
</ul>
<h4><a name=44></a>Швидкість фільтрації й швидкість просування</h4>
<p>Швидкість фільтрації й просування
кадрів - це дві основні характеристики
продуктивності комутатора. Ці характеристики є
інтегральними показниками, вони не залежать від того,
яким чином технічно реалізовано комутатор.</p>
<p><b><i>Швидкість фільтрації</i></b> (<b><i>filtering</i></b>)<i></i>визначає швидкість, з якою комутатор виконує наступні етапи обробки
кадрів:</p>
<ul type=disc>
	<li>прийом кадру до свого буфера;</li>
	<li>перегляд адресної таблиці з метою знаходження порту для адреси призначення кадру;</li>
	<li>знищення кадру, тому що його порту призначення й порт джерела належать одному логічному сегментові.</li>
</ul>
<p>Швидкість фільтрації практично у всіх комутаторів є
що не блокує - комутатор встигає відкидати
кадри в темпі їхнього надходження.</p>
<p><b><i>Швидкість просування</i></b> (<b><i>forwarding</i></b>)<i></i>визначає швидкість, з якої комутатор виконує наступні етапи обробки
кадрів.</p>
<ul type=disc>
	<li>прийом кадру до свого буфера;</li>
	<li>перегляд адресної таблиці з метою знаходження порту для адреси призначення кадру;</li>
	<li>передача кадру в мережу через знайдений по адресній таблиці порт призначення.</li>
</ul>
<p>Як швидкість фільтрації, так і
швидкість просування виміряються звичайно в кадрах за секунду. Якщо в
характеристиках комутатора не уточнюється, для якого протоколу й для якого
розміру кадру наведені значення швидкостей
фільтрації й просування, то за замовчуванням вважається,
що ці показники даються для протоколу Ethernet і
кадрів мінімального розміру, тобто кадрів довжиною 64 байт (без преамбули) з полем даних в 46&nbsp;байт. Якщо швидкості зазначені для якого-небудь певного
протоколу, наприклад Token Ring
або FDDI, то вони також наведені для кадрів мінімальної довжини цього протоколу
(наприклад, кадрів довжини 29&nbsp;байт для протоколу FDDI). Застосування як
основний показник швидкості роботи комутатора кадрів мінімальної довжини мається на увазі, що такі кадри завжди створюють для
комутатора найбільш важкий режим роботи з порівняно з
кадрами іншого формату при рівній пропускній здатності
припустимих даних. Тому при проведенні тестування
комутатора режим передачі кадрів мінімальної довжини використовується
як найбільш складний тест, що повинен перевірити здатність
комутатора працювати при найгіршому сполученні
параметрів трафіка.
Крім того, для пакетів мінімальної довжини швидкість фільтрації й просування
максимальне, що має немаловажне значення при рекламі комутатора.</p>
<p><b><i>Пропускна здатність комутатора</i></b><i></i>виміряється кількістю даних
користувачів (у мегабітах
за секунду), переданих в одиницю часу через
його порти. Тому що комутатор працює на канальному рівні, для нього даними користувачів
є ті дані, які переносяться в поле даних кадрів протоколів канального рівня - Ethernet, Token Ring, FDDI і т.п. Максимальне значення пропускної здатності комутатора завжди досягається на кадрах
максимальної довжини, тому що при цьому частка
накладних витрат на службову інформацію кадру набагато нижче, ніж для кадрів
мінімальної довжини, а час виконання комутатором операцій по обробці кадру, що доводиться на один
байт користувацької інформації, істотно менше. Тому
комутатор може бути, що блокує для кадрів мінімальної довжини, але при цьому
мати дуже гарні показники пропускної здатності.</p>
<p><b><i>Затримка передачі кадру</i></b><i></i>виміряється як час,
що пройшов з
моменту приходу першого байта кадру на вхідний порт комутатора до моменту появи
цього байта на його вихідному порту. Затримка складається із часу, затрачуваного на буферизацію байт кадру, а також часу, затраченого
на обробку кадру комутатором, - перегляду адресної таблиці, ухвалення рішення
про фільтрацію або просування й одержання доступу до середовища
вихідного порту.</p>
<p>Величина внесеної
комутатором затримки залежить від режиму його роботи. Якщо комутація
здійснюється &quot;на льоту&quot;, то затримки
звичайно невеликі й становлять від 5 до 40 мкс, а при повній буферизації
кадрів - від 50 до 200&nbsp;мкс
(для кадрів мінімальної довжини).</p>
<p>Комутатор - це багатопортовий пристрій, тому для нього прийняті всі наведені вище
характеристики (крім затримки передачі кадру) давати у двох варіантах. Перший
варіант - сумарна продуктивність комутатора при одночасній передачі трафіка по всіх його портах,
другий варіант - продуктивність, наведена на один порт. Звичайно виробники комутаторів вказують загальну
максимальну пропускну здатність пристрою.</p>
<h4><a name=45></a>Комутація &quot;на льоту&quot;
або з буферизацією</h4>
<p>На продуктивності комутатора позначається спосіб передачі пакетів – &quot;на льоту&quot; або з буферизациєю. Комутатори, що
передають пакети &quot;на льоту&quot;, вносять
менші затримки передачі кадрів на кожному проміжному комутаторі, тому загальне зменшення затримки доставки даних може бути
значним, що важливо для мультимедійного трафіка. Крім того, обраний
спосіб комутації впливає на можливості реалізації деяких корисних додаткових
функцій, наприклад трансляцію протоколів канального рівня. У табл. 4.2 дається
порівняння можливостей двох способів комутації.</p>
<table border=2 cellpadding=2 width="100%">
	<caption>
	<p align="left">Таблиця 4.2. Можливості
комутаторів при комутації &quot;на льоту&quot;
і з повною буферизацією</p>
	</caption>
	<tr>
		<th valign=top>
		Функція</th>
		<th valign=top>
		На льоту</th>
		<th valign=top>
		З буферизацією</th>
	</tr>
	<tr>
		<td valign=top>
		Захист від поганих кадрів</td>
		<td valign=top>
		Немає</td>
		<td valign=top>
		Так</td>
	</tr>
	<tr>
		<td valign=top>
		Підтримка різнорідних мереж (Ethernet Token Ring, FDDI, ATM)</td>
		<td valign=top>
		Немає</td>
		<td valign=top>
		Так</td>
	</tr>
	<tr>
		<td valign=top>
		Затримка передачі пакетів</td>
		<td valign=top>
		Низька (5-40 мкс) при низькому навантаженні, середня при високому навантаженні</td>
		<td valign=top>
		Середня при будь-якому навантаженні</td>
	</tr>
	<tr>
		<td valign=top>
		Підтримка резервних зв'язків</td>
		<td valign=top>
		Немає</td>
		<td valign=top>
		Так</td>
	</tr>
	<tr>
		<td valign=top>
		Функція аналізу трафіка</td>
		<td valign=top>
		Немає</td>
		<td valign=top>
		Так</td>
	</tr>
</table>
<p>Середня величина
затримки комутаторів, що працюють &quot;на льоту&quot;,
при високому навантаженні розуміється так, що в цьому випадку вихідний порт
часто буває зайнятий прийомом
іншого пакета, що тому знову надійшов пакет для даного порту однаково доводиться буферизувати.</p>
<p>Комутатор, що працює &quot;на льоту&quot;, може виконувати перевірку некоректності
переданих кадрів, але не може вилучити поганий кадр із мережі,
тому що частина його байт (і, як правило, більша частина) уже передані в мережу.</p>
<p>Тому що кожен
спосіб має свої переваги й недоліки, у тих моделях комутаторів, яким не потрібно транслювати протоколи, іноді
застосовується механізм адаптивної зміни режиму роботи комутатора. Основний
режим такого комутатора - комутація &quot;на льоту&quot;,
але комутатор постійно контролює трафік
і при перевищенні інтенсивності появи поганих кадрів деякого
порога переходить на режим повної буферизації.
Потім комутатор може повернутися до комутації &quot;на льоту&quot;.</p>
<h4><a name=46></a>Розмір адресної таблиці</h4>
<p>Максимальна ємкість адресної таблиці визначає
граничну кількість Мас-адрес, з якими може одночасно оперувати комутатор. Тому що
комутатори найчастіше використовують для
виконання операцій кожного порту виділений процесорний блок зі своєю пам'яттю для зберігання
екземпляра адресної таблиці, то розмір адресної таблиці для комутаторів
звичайно приводиться розраховуючи на один порт. Екземпляри адресної таблиці різних
процесорних модулів не обов'язково містять ту
саму адресну інформацію - швидше за все, що повторюються адрес буде не так
багато, якщо тільки розподіл трафіка
кожного порту між іншими портами не повністю рівноімовірні. Кожен порт зберігає тільки ті набори адрес, з якими він працював останнім часом.</p>
<p>Значення максимального числа Мас-адрес, що може запам'ятати процесор порту,
залежить від області застосування комутатора.
Комутатори робочих груп звичайно підтримують усього кілька адрес на порт, тому
що вони призначені для утворення мікросегментів. Комутатори
відділів повинні підтримувати кілька сотень адрес, а комутатори магістралей мереж - до декількох
тисяч, звичайно 4000-8000 адрес.</p>
<p>Недостатня ємність адресної таблиці може служити причиною поганої роботи комутатора й засмічення мережі надлишковим трафіком. Якщо адресна таблиця процесора порту повністю заповнена, а він зустрічає нову адресу
джерела в пакеті, що надійшов, процесор
повинен витиснути з таблиці яку-небудь стару адресу й
помістити на її місце нову. Ця операція сама
по собі віднімає в процесора частину часу, але
головні втрати продуктивності будуть спостерігатися при надходженні кадру з адресою призначення, яку довелося
видалити з адресної таблиці. Тому що адреса
призначення кадру невідома, то комутатор повинен передати цей кадр на всі інші
порти. Ця операція буде створювати зайву роботу для багатьох процесорів портів,
крім того, копії цього кадру будуть попадати й
на ті сегменти мережі, де вони зовсім не
обов'язкові.</p>
<p>Деякі виробники комутаторів
вирішують цю проблему за рахунок зміни алгоритму обробки кадрів з невідомою адресою призначення. Один з портів комутатора конфігурується як
магістральний порт, на який за замовчуванням
передаються всі кадри з невідомою адресою. У
маршрутизаторах такий прийом застосовується
давно, дозволяючи скоротити розміри адресних таблиць у мережах,
організованих по ієрархічному принципу.</p>
<p>Передача кадру на магістральний
порт виробляється розраховуючи на те, що цей
порт підключений до вищестоящого комутатора при ієрархічному
з'єднанні комутаторів у великій мережі, що має достатню ємність
адресної таблиці й знає, куди потрібно передати будь-який кадр.</p>
<h4><a name=47></a>Обсяг
буфера кадрів</h4>
<p>Внутрішня буферна пам'ять
комутатора потрібна для тимчасового зберігання кадрів даних у тих випадках, коли їх
неможливо негайно передати на вихідний порт. Буфер призначений для згладжування
короткочасних пульсацій трафіка.
Адже навіть якщо трафік
добре збалансований і продуктивність процесорів портів, а також інших обробних
елементів комутатора достатня для передачі середніх значень трафіка, це не гарантує, що їхньої
продуктивності вистачить при пікових значеннях навантажень. Наприклад, трафік може протягом декількох десятків мілісекунд надходити
одночасно на всі входи комутатора, не даючи йому можливості передавати прийняті
кадри на вихідні порти. Для запобігання втрат кадрів при короткочасному багаторазовому
перевищенні середнього значення інтенсивності трафіка (а для локальних мереж часто зустрічаються значення коефіцієнта
пульсації трафіка в
діапазоні 50-100) єдиним засобом служить буфер великого обсягу.
Як й у випадку адресних таблиць, кожен
процесорний модуль порту звичайно має свою буферну пам'ять для зберігання кадрів. Чим більше обсяг цієї пам'яті, тим менш
імовірні втрати кадрів при перевантаженнях, хоча при незбалансованості середніх
значень трафіка буфер
однаково рано або пізно переповниться.</p>
<p>Звичайно комутатори, призначені для роботи у відповідальних частинах мережі, мають буферну пам'ять у кілька десятків або
сотень кілобайт на порт. Добре, коли цю буферну пам'ять можна перерозподіляти
між декількома портами, тому що одночасні
перевантаження по декількох портах
малоймовірні. Додатковим засобом захисту може служити загальний
для всіх портів буфер у модулі керування
комутатором. Такий буфер звичайно має обсяг у кілька
мегабайта.</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="table1">
  <tr>
    <td width="100%" align="left" colspan="3"><hr color="#2D4C54" size="4"></td>
  </tr>
  <tr>
    <td width="33%" align="left"><a href="018.htm">Попередня</a></td>
    <td width="33%" align="center"><a href="001.htm">Перша</a></td>
    <td width="34%" align="right"><a href="020.htm">Наступна</a></td>
  </tr>
</table>
</body>
</body>
</html>
