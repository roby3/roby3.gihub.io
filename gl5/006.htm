<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="uk">
<link rel=Edit-Time-Data href=../6.files/editdata.mso>
<title>5.1.6. Реалізація міжмережевої взаємодії засобами TCP/IP</title>
</head>
<body lang=ua>
<h3>5.1.6.
Реалізація міжмережевої взаємодії засобами TCP/IP</h3>
<p>У цей час стек TCP/IP є самим популярним засобом
організації складених мереж.
На мал. 5.4 показана частка, що становить той або
інший стек протоколів у загальносвітовій інсталяційнії мережевої
базі. До 1996 року безперечним лідером був стек IPX/SPX компанії Novell, але
потім картина різко змінилася - стек TCP/IP по темпах росту
числа установок набагато став випереджати інші
стеки, а з 1998 року вийшов у лідери й в абсолютному вираженні.
Саме тому подальше вивчення функцій мережевого
рівня буде проводитися на прикладі стека
TCP/IP.</p>
<table border="0" width="100%" id="table1">
	<tr>
		<td align="center">
<img width=542 height=372 src=images/im004.jpg alt="Мал.&nbsp;5.4. Стек TCP/IP стає основним засобом побудови складених мереж"></td>
	</tr>
	<tr>
		<td align="center">Мал.&nbsp;5.4. Стек TCP/IP стає основним засобом побудови складених
мереж</td>
	</tr>
</table>
<h4>Багаторівнева
структура стека TCP/IP</h4>
<p>У стеці TCP/IP визначені 4 рівні
(мал.&nbsp;5.5). Кожен із цих рівнів несе на собі
деяке навантаження за рішенням основного завдання
- організації надійної й продуктивної роботи складеної
мережі, частини
якої побудовані на основі різних мережевих технологій.</p>
<table border="0" cellpadding="0" cellspacing="1" width="100%" id="table3">
	<tr>
		<td align="center">
		<table border="1" cellpadding="5" cellspacing="0" id="table4" bordercolor="#000080">
			<tr>
				<td>Рівень 1</td>
				<td>Прикладний рівень</td>
			</tr>
			<tr>
				<td>Рівень 2</td>
				<td>Загальний(транспортний)<br>
				рівень</td>
			</tr>
			<tr>
				<td>Рівень 3</td>
				<td>Рівень міжмережевої взаємодії</td>
			</tr>
			<tr>
				<td>Рівень 4</td>
				<td>Рівень мережевих інтерфейсів</td>
			</tr>
		</table>
		</td>
	</tr>
	<tr>
		<td align="center">Мал.&nbsp;5.5. Багаторівнева архітектура стека TCP/IP</td>
	</tr>
</table>
<h4>Рівень міжмережевої взаємодії</h4>
<p>Основою всієї архітектури є <i>рівень міжмережевої взаємодії</i>, що реалізує концепцію передачі пакетів у режимі без установлення
з'єднань, тобто дейтаграмним
способом. Саме цей рівень забезпечує можливість переміщення пакетів по мережі, використовуючи той маршрут, який у цей
момент є найбільш раціональним. Цей рівень
також називають рівнем <b>internet</b>, указуючи тим самим на основну його функцію - передачу даних через
складену мережу.</p>
<p>Основним
протоколом мережного рівня (у термінах моделі
<b>OSI</b>) у стеці є <b>протокол IP</b> (Internet
Protocol). Цей протокол споконвічно проектувався як протокол передачі пакетів у
складених мережах,
які складаються з великої кількості локальних мереж, об'єднаних
як локальними, так і глобальними зв'язками.
Тому протокол IP добре працює в мережах зі складною топологією, раціонально використовуючи
наявність у них підсистем й ощадливо витрачаючи пропускну здатність низькошвидкісних
ліній зв'язку. Тому що протокол IP є дейтаграмним протоколом, він не гарантує доставку
пакетів до вузла призначення, але намагається це зробити.</p>
<p>До рівня міжмережевої
взаємодії належать й всі протоколи, пов'язані
зі складанням і модифікацією таблиць маршрутизації, такі як протоколи збору
маршрутної інформації <b>RIP</b> (Routing Internet Protocol) і <b>OSPF</b> (Open Shortest
Path First), а також протокол міжмережевих керуючих
повідомлень <b>ICMP</b> (Internet Control Message Protocol). Останній протокол
призначений для обміну інформацією про помилки між маршрутизаторами мережі й вузлом-джерелом пакета. За допомогою
спеціальних пакетів <b>ICMP</b> повідомляє про неможливість доставки пакета, про
перевищення часу життя або тривалості зборки пакета із фрагментів, про аномальні величини параметрів, про зміну маршруту пересилання
й типу обслуговування, про стан системи й т.п.</p>
<h4>Загальний рівень</h4>
<p>Оскільки на мережевому рівні не встановлюються з'єднання, то немає ніяких гарантій, що всі пакети
будуть доставлені в місце призначення цілими і непошкодженими або прийдуть у
тому ж порядку, у якому вони були відправлені. Це завдання
— забезпечення надійного інформаційного зв'язку
між двома кінцевими вузлами — вирішує <i>загальний рівень</i> стека TCP/IP, що 
зветься також 
<i>транспортним</i>.</p>
<p>На цьому рівні функціонують
протокол управління передачею <b>TCP</b>
(Transmission Control Protocol) і протокол дейтаграм
користувача <b>UDP</b> (User Datagram Protocol). Протокол TCP забезпечує надійну
передачу повідомлень між віддаленими
прикладними процесами за рахунок утворення
логічних з'єднань. Цей протокол дозволяє рівноранговим об'єктам на комп'ютері-відправнику й
комп'ютері-одержувачі підтримувати обмін даними в дуплексному режимі. <b>TCP</b>
дозволяє без помилок доставити сформований на одному з комп'ютерів потік байт у
будь-який інший комп'ютер, що входить у складену
мережу. TCP поділяє
потік байт на частини — <i>сегменти</i> й
передає їх нижче лежачому рівню міжмережевої взаємодії. Після того як ці сегменти
будуть доставлені засобами рівня міжмережевої взаємодії в пункт призначення, протокол
TCP знову збере їх у безперервний потік байт.</p>
<p>Протокол <b>UDP</b> забезпечує передачу
прикладних пакетів дейтаграмним способом, як і
головний протокол рівня міжмережевої взаємодії
<b>IP</b>, і виконує тільки функції сполучної ланки (мультиплексора)
між мережевим протоколом і чисельними службами
прикладного рівня або користувацьких процесів.</p>
<h4>Прикладний
рівень</h4>
<p><i>Прикладний рівень</i> об'єднує всі служби, які надаються
системою користувальницьким додаткам. За довгі роки використання в мережах різних країн й організацій стек
<b>TCP/IP</b>
накопив велику кількість протоколів і служб прикладного рівня. Прикладний
рівень реалізується програмними системами, побудованими в архітектурі
клієнт-сервер, що базуються на протоколах нижніх рівнів. На відміну від
протоколів інших трьох рівнів, протоколи прикладного рівня займаються деталями конкретного додатка й 
&quot;не
цікавляться&quot; способами передачі даних по мережі.
Цей рівень постійно розширюється за рахунок приєднання до стару, минулу
багаторічну експлуатацію мережевим службам
типу Telnet, FTP, TFTP, DNS, SNMP порівняно нових служб таких, наприклад, як протокол передачі гіпертекстової інформації
HTTP.</p>
<h4>Рівень мережевих інтерфейсів</h4>
<p>Ідеологічною відмінністю архітектури стека TCP/IP від
багаторівневої організації інших стеків є
інтерпретація функцій самого нижнього рівня —<i> рівня мережевих інтерфейсів</i>. Протоколи цього рівня повинні забезпечувати інтеграцію в складену мережу
інших мереж, причому завдання
ставиться так: мережа TCP/IP повинна мати засоби включення в
себе будь-якої іншої мережі, яку б внутрішню
технологію передачі даних ця мережа не використовувала. Звідси випливає, що цей рівень не
можна визначити раз
і назавжди. Для кожної технології, що включає в складену
мережу підмережі,
повинні бути розроблені власні інтерфейсні засоби.
До таких інтерфейсних засобів
належать протоколи інкапсуляції IP-пакетів
рівня міжмережевої взаємодії в кадри локальних
технологій. Наприклад, документ <b>RFC&nbsp;1042</b> визначає
способи інкапсуляції IP-пакетів у кадри технологій IEEE&nbsp;802. Для цих цілей
повинен використовуватися заголовок <b>LLC/SNAP</b>,
причому в полі Туре заголовка SNAP повинен бути
указаний код 0x0800. Тільки для протоколу
Ethernet в RFC&nbsp;1042 зроблено виняток - крім
заголовка LLC/SNAP дозволяється використовувати
кадр Ethernet&nbsp;DIX, що не має заголовка LLC, зате має
поле Туре. У мережах Ethernet кращою є
інкапсуляція IP-пакета в кадр Ethernet&nbsp;DIX.</p>
<p>Рівень мережевих
інтерфейсів у протоколах TCP/IP не регламентується, але він підтримує всі
популярні стандарти фізичного й канального рівнів: для локальних мереж це Ethernet, Token Ring, FDDI, Fast Ethernet,
Gigabit Ethernet, 100VG-AnyLAN, для глобальних мереж
- протоколи з'єднань «точка-точка» SLIP і РРР, протоколи територіальних мереж
з комутацією пакетів Х.25, frame relay.
Розроблена також спеціальна специфікація, що визначає
використання технології ATM як транспорт канального рівня. Звичайно з появою
нової технології локальних або глобальних мереж
вона швидко включається в стек TCP/IP за рахунок розробки відповідного RFC, що визначає
метод інкапсуляції IP-пакетів у її кадри (специфікація RFC&nbsp;1577, що визначає роботу IP через мережі
ATM, з'явилася в 1994 році незабаром після прийняття основних стандартів цієї
технології).</p>
<h4>Відповідність
рівнів стека TCP/IP семирівневої моделі ISO/OSI</h4>
<p>Тому що стек TCP/IP був
розроблений до появи моделі взаємодії відкритих систем ISO/OSI, те, хоча він
також має багаторівневу структуру, відповідність рівнів стека TCP/IP рівням
моделі OSI досить умовно (мал.&nbsp;5.6). Розглядаючи багаторівневу архітектуру TCP/IP, можна виділити в ній, подібно архітектурі OSI, рівні, функції яких
залежать від конкретної технічної реалізації мережі,
і рівні, функції яких орієнтовані на роботу з додатками (мал.&nbsp;5.7).</p>
<table border="0" width="100%" id="table5">
	<tr>
		<td align="center">
<img width=443 height=268
src=images/im006.jpg v:shapes=_x0000_i1027></td>
	</tr>
	<tr>
		<td align="center">Мал. 5.6. Відповідність рівнів стека TCP/IP семирівневої моделі OSI</td>
	</tr>
</table>
<table border="0" width="100%" id="table6">
	<tr>
		<td align="center">
<img width=534 height=548
src=images/im007.jpg v:shapes=_x0000_i1028></td>
	</tr>
	<tr>
		<td align="center">Мал. 5.7. Мережезалежні й мереженезалежні
рівні стека TCP/IP</td>
	</tr>
</table>
<p>Протоколи прикладного рівня стека
TCP/IP працюють на комп'ютерах, що виконує додатки користувачів. Навіть повна
зміна мережевого обладнання
в загальному випадку не повинна впливати на
роботу додатків, якщо вони одержують доступ до
мережевих можливостей через протоколи
прикладного рівня.</p>
<p>Протоколи транспортного рівня вже
більше залежать від мережі,
тому що вони реалізують інтерфейс до рівнів, що безпосередньо організують
передачу даних по мережі. Однак, подібно
протоколам прикладного рівня, програмні модулі, що реалізують протоколи
транспортного рівня, встановлюються тільки на
кінцевих вузлах. Протоколи двох нижніх рівнів є
мереженезалежними, а отже, програмні модулі
протоколів міжмережевого рівня й рівня мережевих інтерфейсів встановлюються
як на кінцевих вузлах складеної мережі, так і на маршрутизаторах.</p>
<p>Кожен комунікаційний протокол оперує з деякою одиницею переданих даних. Назви цих одиниць
іноді закріплюються стандартом, а частіше просто визначаються
традицією. У стеці TCP/IP за багато років його існування утворилася устояна термінологія в цій області
(мал.&nbsp;5.8).</p>
<table border="0" width="100%" id="table7">
	<tr>
		<td align="center">
<img width=394 height=340
src=images/im008.jpg v:shapes=_x0000_i1029></td>
	</tr>
	<tr>
		<td align="center">Мал. 5.8. Назва одиниць даних, які використовуються в TCP/IP</td>
	</tr>
</table>
<p><b><i>Потоком</i></b> називають дані, що надходять від додатків на вхід протоколів транспортного рівня TCP
й UDP.</p>
<p>Протокол TCP нарізає з потоку
дані <i>сегменти</i>.</p>
<p>Одиницю даних протоколу UDP часто
називають <i>дейтаграмою</i> (або датаграмою). <b>Дейтаграма</b>
- це загальна назва
для одиниць даних, якими оперують протоколи без встановлення з'єднань. До таких протоколів належить й протокол міжмережевої
взаємодії <b>IP</b>.</p>
<p><b>Дейтаграму протоколу IP називають також <i>пакетом</i>.</b></p>
<p>У стеці TCP/IP прийнято називати <i>кадрами</i> (<i>фреймами</i>) одиниці
даних протоколів, на основі яких IP-пакети переносяться через підмережі складеної мережі. При цьому не має значення, яка назва використовується для цієї одиниці даних у локальній
технології.</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="table1">
  <tr>
    <td width="100%" align="left" colspan="3"><hr color="#2D4C54" size="4"></td>
  </tr>
  <tr>
    <td width="33%" align="left"><a href="005.htm">Попередня</a></td>
    <td width="33%" align="center"><a href="001.htm">Перша</a></td>
    <td width="34%" align="right"><a href="007.htm">Наступна</a></td>
  </tr>
</table></body>
</html>
